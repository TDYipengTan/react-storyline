import { RefObject } from "react";
import { useRect } from "@reach/rect";
import { PanelType } from "./Panel";

const usePanelCompatibleStyles = (ref: RefObject<PanelType>) => {
  const rect = useRect(ref);
  const position = ref.current
    ?.getAttribute("data-co-position")
    ?.includes("left")
    ? "left"
    : "right";

  if (rect && rect.right !== 0) {
    return position === "right"
      ? { width: "calc(100% - ( 100% - " + rect.left + "px))" }
      : {
          width: "calc(100% - " + rect.right + "px)",
          position: "absolute",
          right: 0,
        };
  }

  return {};
};

export default usePanelCompatibleStyles;
