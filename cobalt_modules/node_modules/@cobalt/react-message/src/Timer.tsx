import React, { FC, HTMLAttributes, Ref } from "react";
import cc from "classcat";
import styles from "@cobalt/css-message";

export type TimerType = HTMLDivElement;

export interface Props extends HTMLAttributes<TimerType> {
  active?: boolean;
  /** The number of seconds the animation takes. */
  duration?: number;
  /** The number of seconds elapsed from the animation. */
  elapsed?: number;
  forwardedRef?: Ref<TimerType>;
}

const Timer: FC<Props> = ({
  className = "",
  style,
  forwardedRef,
  active,
  duration = 5,
  elapsed,
  ...props
}) => {
  const classStyles = cc([
    styles["co-message__timer"],
    {
      [styles["co-message__timer--active"]]: active
    },
    className
  ]);

  return (
    <div
      className={classStyles}
      ref={forwardedRef}
      style={{
        animationDuration: `${duration}s`,
        animationDelay: elapsed ? `-${elapsed}s` : undefined,
        ...style
      }}
      {...props}
    />
  );
};

export default Timer;
