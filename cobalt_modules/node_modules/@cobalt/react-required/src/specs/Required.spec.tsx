import React from "react";
import { render } from "@testing-library/react";
import Required, { RequiredType } from "../Required";

describe("<Required />", () => {
  it("renders", () => {
    const { container } = render(<Required title="required" />);

    expect(container).toMatchSnapshot();
  });

  it("renders with custom attribute", () => {
    const { getByText } = render(
      <Required title="required" data-test="test" />
    );

    expect(getByText("*").getAttribute("data-test")).toEqual("test");
  });

  it("renders with default and custom class", () => {
    const wrapper = render(<Required title="required" className="co-hello" />);

    expect(wrapper.getByText("*").classList.value).toBe("co-required co-hello");
  });

  it("renders with a ref", () => {
    const ref = React.createRef<RequiredType>();

    const { getByTestId } = render(
      <Required forwardedRef={ref} title="required" data-testid="test" />
    );

    expect(getByTestId("test")).toBe(ref.current);
  });
});
