import React, { FC, HTMLAttributes, Ref } from "react";
import cc from "classcat";
import styles from "@cobalt/css-table";

export type DragHandleType = HTMLTableCellElement;

type Attrs = Omit<HTMLAttributes<DragHandleType>, "placeholder">;
export interface Props extends Attrs {
  as?: "td" | "th" | "div";
  placeholder?: boolean;
  forwardedRef?: Ref<DragHandleType>;
}

const DragHandle: FC<Props> = ({
  as,
  className = "",
  placeholder,
  forwardedRef,
  ...props
}) => {
  const classes = cc([
    styles["co-table__row-drag-handle"],
    { [styles["co-table__row-drag-handle--placeholder"]]: placeholder },
    className
  ]);

  const Tag = as || (placeholder ? "th" : "td");

  return <Tag className={classes} ref={forwardedRef} {...props} />;
};

export default DragHandle;
